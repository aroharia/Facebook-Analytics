<head>
  <!-- Plotly.js -->
   <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <div id="myDiv" style="width: 480px; height: 400px;"><!-- Plotly chart will be drawn inside this DIV --></div>
  <script>
    function makeplot() {
        Plotly.d3.csv("103420729696747_facebook_statuses.csv", function(data){ processData(data) } );
    };
        
    function processData(allRows) {

        console.log(allRows);
        var x = [], y = [];

        for (var i=0; i<allRows.length; i++) {
            row = allRows[i];
            x.push( row['status_published'] );
            y.push( row['num_reactions'] );
        }
        console.log( 'X',x, 'Y',y );
        makePlotly( x, y, );
    }

    function makePlotly( x, y ){
        var plotDiv = document.getElementById("plot");
        var traces = [{
            x: x, 
            y: y
        }];

        Plotly.newPlot('myDiv', traces, 
            {title: 'Plotting CSV data from AJAX call'});
    };
      makeplot();
  </script>
</body>