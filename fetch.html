<head>
    <!-- Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
</head>

<body>
    <div id="container">
        <div id="header">
            <div id="title"><p><img src="facebooklogo.svg" width= 45px height=45px/> Fetchbook</p></div>
            
            <div id="profilepill">
                <img src="profilepicture.jpg" />
                <div id="texts">
                    <p>Logged in as <span>Danny Sutanto</span></p>
                    <p id="logout">Click here to <a href="index.html">Logout</a></p>
                </div>
            </div>
        </div>
        
        <!-- ================================================== -->
        
        <div id="greeting">
            <h2>"Hi Danny Sutanto!"</h2>
            <h3>Here are the graphs you asked for:</h3>
        </div>

        <!-- ================================================== -->
        
        <div class="dropdown">
            <button onclick="myFunction()" class="dropbtn">Dropdown</button>
            <div id="myDropdown" class="dropdown-content">
                <a href="#">Link 1</a>
                <a href="#">Link 2</a>
                <a href="#">Link 3</a>
            </div>
        </div>
        
        <!-- ================================================== -->

        <div id="plotgrid">
            <div class="plots" id="figure1"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div class="plots" id="figure2"><!-- Plotly chart will be drawn inside this DIV --></div>
            <div class="plots">
                <h3>Most Common Words:</h3>
                <iframe src="rankedwords.txt"></iframe>
            </div>
            <div class="plots">
                <h3>Most Common Phrases:</h3>
                <iframe src="rankedphrases.txt"></iframe>
            </div>
        </div>

        <!-- ================================================== -->

        <div id="footer">
            <h3>EE461L PROJECT FETCHBOOK</h3>
            <h4>Justin Liang, Zhaofeng Liang, Ashvin Roharia, Nicholas Sutanto, Zach Dewey</h4>
        </div>
    </div>
    
    <!-- ===================================================== -->
    
    <script>
        <!-- GRAPH 1 -->
        function makeplot() {
            Plotly.d3.csv("103420729696747_facebook_statuses.csv", function(data){ processData(data) } );
        };

        function processData(allRows) {

            console.log(allRows);
            var x = [], y = [];

            for (var i=0; i<allRows.length; i++) {
                row = allRows[i];
                x.push( row['status_published'] );
                y.push( row['num_reactions'] );
            }
            console.log( 'X',x, 'Y',y );
            makePlotly( x, y, );
        }

        function makePlotly( x, y ){
            var plotDiv = document.getElementById("plot");
            var traces = [{
                x: x, 
                y: y
        }];

        Plotly.newPlot('figure1', traces, 
            {title: 'Number of Reactions'});
        };
        makeplot();

        <!-- GRAPH 2 -->
        Plotly.d3.csv("103420729696747_facebook_statuses.csv", function(err, rows){

          function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
        }


        var trace1 = {
          name: "Likes",
          type: "scatter",
          mode: "lines",
          x: unpack(rows, 'status_published'),
          y: unpack(rows, 'num_reactions'),
          line: {color: '#17BECF'}
        }

        var trace2 = {
          name: "Comments",
          type: "scatter",
          mode: "lines",
          x: unpack(rows, 'status_published'),
          y: unpack(rows, 'num_comments'),
          line: {color: '#7F7F7F'}
        }

        var data = [trace1,trace2];

        var layout = {
          title: 'Number of Reactions & Comments', 
          xaxis: {
            title: 'Date',
            type: 'date'
          }, 
          yaxis: {
            autorange: true, 
            title: 'Number of People',
            type: 'linear'
          }
        };

        Plotly.newPlot('figure2', data, layout);
        })
    </script>
</body>
